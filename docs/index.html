<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExamBeing | Premium Practice Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        .glass-card { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.3); }
        .primary-gradient { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); }
        .accent-gradient { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1); }
        .option-btn { transition: all 0.2s ease; border: 2px solid #f1f5f9; }
        .option-btn:hover:not([disabled]) { border-color: #3b82f6; background-color: #eff6ff; }
    </style>
</head>
<body class="text-slate-900">

    <nav class="sticky top-0 z-50 glass-card shadow-sm border-b border-slate-200 px-4 py-3">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3 cursor-pointer" onclick="goHome()">
                <div class="w-10 h-10 primary-gradient rounded-xl flex items-center justify-center text-white shadow-blue-200 shadow-lg">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div>
                    <h1 class="text-lg font-extrabold tracking-tight leading-none">ExamBeing</h1>
                    <span class="text-[10px] text-blue-600 font-bold uppercase tracking-widest">Beyond Excellence</span>
                </div>
            </div>
            <a href="https://play.google.com/store/apps/details?id=com.opkukna.exambeing" target="_blank" class="accent-gradient text-white text-xs font-bold px-5 py-2.5 rounded-full shadow-md hover:opacity-90 transition">
                <i class="fab fa-google-play mr-1"></i> DOWNLOAD APP
            </a>
        </div>
    </nav>

    <div class="max-w-4xl mx-auto px-4 py-8">
        
        <div id="hero-banner" class="mb-10 rounded-3xl p-1 bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-700 shadow-2xl shadow-blue-200">
            <div class="bg-slate-900 rounded-[22px] p-6 text-white flex flex-col md:flex-row items-center justify-between gap-6 overflow-hidden relative">
                <div class="relative z-10 text-center md:text-left">
                    <span class="bg-blue-500/20 text-blue-400 text-[10px] font-black px-3 py-1 rounded-full uppercase mb-4 inline-block border border-blue-500/30">Limited Free Access</span>
                    <h2 class="text-2xl font-bold mb-2">Master Rajasthan GK</h2>
                    <p class="text-slate-400 text-sm max-w-sm">Unlock 10,000+ Premium Questions, Detailed PDF Notes & Mock Tests on the App.</p>
                </div>
                <a href="https://play.google.com/store/apps/details?id=com.opkukna.exambeing" class="relative z-10 whitespace-nowrap bg-white text-slate-900 px-8 py-4 rounded-2xl font-bold text-sm hover:bg-blue-50 transition shadow-xl">
                    Get Full Version Free <i class="fas fa-arrow-right ml-2"></i>
                </a>
                <i class="fas fa-rocket absolute -right-4 -bottom-4 text-9xl text-white/5 rotate-12"></i>
            </div>
        </div>

        <nav id="nav-info" class="mb-6 flex items-center gap-2 text-sm font-medium text-slate-400 hidden">
            <span onclick="goHome()" class="hover:text-blue-600 cursor-pointer">Home</span>
            <i class="fas fa-chevron-right text-[10px]"></i>
            <span id="crumb-subject" class="hover:text-blue-600 cursor-pointer"></span>
            <span id="crumb-topic-divider" class="hidden"><i class="fas fa-chevron-right text-[10px]"></i></span>
            <span id="crumb-topic" class="text-slate-800"></span>
        </nav>

        <div id="render-engine" class="min-h-[400px]">
            <div class="flex flex-col items-center justify-center py-20">
                <div class="w-12 h-12 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"></div>
                <p class="mt-4 font-bold text-slate-400 animate-pulse">Initializing Database...</p>
            </div>
        </div>

    </div>

    <div id="quiz-portal" class="fixed inset-0 bg-slate-50 z-[100] hidden overflow-y-auto">
        </div>

    <script>
        let rawData = [];
        let state = { subject: "", topic: "", set: 0 };

        // Initial Data Fetch
        fetch('questions.json')
            .then(res => res.json())
            .then(data => {
                rawData = data;
                renderSubjects();
            });

        function goHome() {
            document.getElementById('nav-info').classList.add('hidden');
            renderSubjects();
        }

        function renderSubjects() {
            const subjects = [...new Set(rawData.map(i => i.subject || "General Rajasthan GK"))];
            let html = `
                <div class="flex justify-between items-end mb-6">
                    <h3 class="text-2xl font-black text-slate-800">Explore Subjects</h3>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            `;
            subjects.forEach(sub => {
                html += `
                    <div onclick="renderTopics('${sub}')" class="glass-card p-6 rounded-2xl card-hover cursor-pointer flex justify-between items-center group">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center group-hover:bg-blue-600 group-hover:text-white transition-colors shadow-sm">
                                <i class="fas fa-folder-open"></i>
                            </div>
                            <span class="font-bold text-slate-700">${sub}</span>
                        </div>
                        <i class="fas fa-arrow-right text-slate-300 group-hover:text-blue-600 translate-x-0 group-hover:translate-x-2 transition-all"></i>
                    </div>
                `;
            });
            html += `</div>`;
            document.getElementById('render-engine').innerHTML = html;
        }

        function renderTopics(sub) {
            state.subject = sub;
            document.getElementById('nav-info').classList.remove('hidden');
            document.getElementById('crumb-subject').innerText = sub;
            document.getElementById('crumb-subject').onclick = () => renderTopics(sub);
            document.getElementById('crumb-topic').innerText = "";
            document.getElementById('crumb-topic-divider').classList.add('hidden');

            const topics = [...new Set(rawData.filter(i => (i.subject || "General Rajasthan GK") === sub).map(i => i.topic))];
            
            let html = `<h3 class="text-xl font-bold text-slate-800 mb-6">Select a Topic</h3><div class="grid grid-cols-1 gap-3">`;
            topics.forEach(top => {
                html += `
                    <div onclick="renderSets('${top}')" class="bg-white p-5 rounded-2xl border border-slate-200 flex items-center justify-between cursor-pointer hover:border-blue-500 hover:shadow-lg hover:shadow-blue-100 transition shadow-sm group">
                        <div class="flex items-center gap-4">
                            <span class="w-2 h-2 rounded-full bg-blue-400 group-hover:scale-150 transition-transform"></span>
                            <span class="font-semibold text-slate-700">${top}</span>
                        </div>
                        <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">View Sets</span>
                    </div>
                `;
            });
            html += `</div>`;
            document.getElementById('render-engine').innerHTML = html;
        }

        function renderSets(topic) {
            state.topic = topic;
            document.getElementById('crumb-topic-divider').classList.remove('hidden');
            document.getElementById('crumb-topic').innerText = topic;

            const total = rawData.filter(i => i.topic === topic).length;
            const sets = Math.ceil(total / 20);

            let html = `<h3 class="text-xl font-bold text-slate-800 mb-6">Practice Sets for ${topic}</h3><div class="grid grid-cols-2 sm:grid-cols-3 gap-4">`;
            for (let i = 1; i <= sets; i++) {
                html += `
                    <div onclick="initiateQuiz('${topic}', ${i})" class="bg-white p-6 rounded-3xl border-2 border-slate-100 text-center cursor-pointer hover:border-blue-600 transition shadow-sm group">
                        <div class="text-xs font-black text-blue-600 uppercase tracking-widest mb-1">Set</div>
                        <div class="text-4xl font-black text-slate-800 group-hover:scale-110 transition-transform">${i}</div>
                        <div class="mt-3 text-[10px] text-slate-400 font-bold uppercase italic">20 Questions</div>
                    </div>
                `;
            }
            html += `</div>`;
            document.getElementById('render-engine').innerHTML = html;
        }

        function initiateQuiz(topic, setIdx) {
            const filtered = rawData.filter(i => i.topic === topic);
            const batch = filtered.slice((setIdx - 1) * 20, setIdx * 20);
            
            const portal = document.getElementById('quiz-portal');
            portal.classList.remove('hidden');
            
            let current = 0;
            let score = 0;
            let userTrace = [];

            const updatePortal = () => {
                const q = batch[current];
                const progress = ((current + 1) / batch.length) * 100;
                
                portal.innerHTML = `
                    <div class="max-w-3xl mx-auto min-h-screen flex flex-col">
                        <div class="p-6 flex justify-between items-center bg-white border-b">
                            <div class="w-2/3">
                                <div class="flex justify-between text-[10px] font-black uppercase text-slate-400 mb-1">
                                    <span>Question ${current + 1} of ${batch.length}</span>
                                    <span>${Math.round(progress)}% Complete</span>
                                </div>
                                <div class="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                                    <div class="bg-blue-600 h-full transition-all duration-500" style="width: ${progress}%"></div>
                                </div>
                            </div>
                            <button onclick="closePortal()" class="w-10 h-10 rounded-full hover:bg-slate-100 transition flex items-center justify-center text-slate-400"><i class="fas fa-times"></i></button>
                        </div>

                        <div class="p-6 md:p-12 flex-grow">
                            <h2 class="text-2xl md:text-3xl font-bold text-slate-800 mb-10 leading-tight">${q.question}</h2>
                            <div class="grid grid-cols-1 gap-4">
                                ${q.options.map(opt => `
                                    <button onclick="processAnswer('${opt.replace(/'/g, "\\'")}')" class="option-btn w-full text-left p-5 rounded-2xl bg-white shadow-sm font-semibold text-slate-700 flex justify-between items-center group">
                                        <span>${opt}</span>
                                        <i class="fas fa-circle-check text-slate-100 group-hover:text-blue-200 transition"></i>
                                    </button>
                                `).join('')}
                            </div>
                        </div>

                        <div class="p-6 bg-blue-50 border-t flex flex-col md:flex-row items-center justify-between gap-4">
                            <p class="text-blue-800 text-sm font-medium"><i class="fas fa-info-circle mr-2"></i> Want explanation for this question?</p>
                            <a href="https://play.google.com/store/apps/details?id=com.opkukna.exambeing" class="primary-gradient text-white px-6 py-3 rounded-xl font-bold text-xs shadow-lg shadow-blue-200">View Detailed Solutions on App</a>
                        </div>
                    </div>
                `;
            };

            window.processAnswer = (choice) => {
                const correct = batch[current].answer;
                userTrace.push({ q: batch[current].question, choice, correct });
                if(choice === correct) score++;
                
                current++;
                if(current < batch.length) updatePortal();
                else finalize(score, userTrace);
            };

            const finalize = (finalScore, trace) => {
                portal.innerHTML = `
                    <div class="max-w-3xl mx-auto p-6 md:p-12 text-center">
                        <div class="mb-10 pt-10">
                            <div class="w-32 h-32 primary-gradient rounded-full flex items-center justify-center text-white text-4xl font-black mx-auto mb-6 shadow-2xl shadow-blue-300">${finalScore}</div>
                            <h2 class="text-4xl font-black text-slate-800 mb-2">Quiz Finished!</h2>
                            <p class="text-slate-500 font-medium">You scored ${finalScore} out of ${batch.length} questions.</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-10">
                            <a href="https://play.google.com/store/apps/details?id=com.opkukna.exambeing" class="accent-gradient p-5 rounded-3xl text-white shadow-xl shadow-emerald-100 flex flex-col items-center">
                                <i class="fas fa-file-pdf text-2xl mb-2 text-emerald-200"></i>
                                <span class="font-bold">Download PDF Notes</span>
                            </a>
                            <div onclick="closePortal()" class="bg-slate-900 p-5 rounded-3xl text-white shadow-xl shadow-slate-200 flex flex-col items-center cursor-pointer">
                                <i class="fas fa-redo text-2xl mb-2 text-slate-400"></i>
                                <span class="font-bold">Try Another Set</span>
                            </div>
                        </div>

                        <div class="text-left space-y-6 mb-20">
                            <h3 class="text-xl font-black text-slate-800 border-b pb-4">Detailed Review</h3>
                            ${trace.map((t, idx) => `
                                <div class="p-6 rounded-3xl ${t.choice === t.correct ? 'bg-emerald-50 border border-emerald-100' : 'bg-rose-50 border border-rose-100'}">
                                    <p class="font-bold text-slate-800 mb-3">${idx+1}. ${t.q}</p>
                                    <div class="flex flex-col gap-2">
                                        <div class="text-xs font-bold uppercase tracking-widest ${t.choice === t.correct ? 'text-emerald-600' : 'text-rose-600'}">
                                            Your Answer: ${t.choice}
                                        </div>
                                        ${t.choice !== t.correct ? `<div class="text-xs font-bold uppercase tracking-widest text-emerald-600">Correct Answer: ${t.correct}</div>` : ''}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            };

            updatePortal();
        }

        function closePortal() { document.getElementById('quiz-portal').classList.add('hidden'); }
    </script>
</body>
</html>
